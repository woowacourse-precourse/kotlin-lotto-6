# 🎉 로또

## 고려 사항

### 1. MVC 디자인 패턴 적용

* 관심사를 분리함으로써, 요구 사항에 따라 도메인 로직과 UI 로직을 분리

* 패키지 구조
  * constants : 프로그램에서 사용될 고정된 문자열/숫자를 관리
  * controller : ui logic과 domain logic의 매개체로서 필요한 작업들을 수행
  * domain : 데이터의 처리와 관련된 로직을 수행
  * view : 사용자에게 보여줄 데이터를 출력하는 작업을 수행
    * 별도로 데이터를 처리하는 과정이 없어야 함
  * util : 사용자 입력값의 유효성을 판단하고 예외 처리를 하는 등 부가적인 작업들을 수행
  ```
  src
   ├── main
   │     ├── constants : Constants, ExceptionMessages
   │     ├── controller : LottoController
   │     ├── domain
   │     │     ├── chance : Chance
   │     │     ├── lotto : Lotto, NumberPicker
   │     │     ├── purchase : Money
   │     │     └── result : FinalResult, LottoResult, Rank
   │     ├── utils : InputViewValidation
   │     ├── view : InputView, ResultView
   │     └── Application.kt
   └── test
  ```

### 2. 테스트 주도 개발 적용

* 자동화된 테스트 케이스를 작성한 후에, 그 테스트 케이스를 통과하기 위한 최소한의 코드를 생성

* 바로 기능을 상세하게 구현하는 것이 아니라, 기능 단위로 테스트 케이스를 먼저 만든 후 테스트 케이스를 충족하도록 기능들을 구현

-- -- --

## 구현 기능

### 1. 구입 금액 관련
#### 1.1. 구입 금액 입력(View ➡️ Controller ➡️ Domain)
- [x] View에서 사용자로부터 구입금액을 입력받는다.
- [x] 사용자로부터 입력받은 금액의 유효성을 InputViewValidation에서 체크하고, 예외처리 한다. 유효하지 않은 값 입력 시 사용자가 다시 입력하도록 한다.
  - [x] 입력의 형태는 Int이어야 한다. 문자열 형태 입력 시 예외처리한다.
  - [x] 입력값은 0이 넘어야 한다. 음수 입력 시 예외처리 한다. 
  - [x] 1000으로 나누어 떨어져야 한다. 1000으로 나누어 떨어지지 않을 시 예외처리 한다.
- [x] 사용자로부터 입력받은 구매 금액을 Controller가 전달받아 Domain 측에 보존

### 2. 로또 발행
#### 2-1. 금액에 맞는 수량을 출력하는 기능(Domain ➡️ Controller ➡️ View)
- [x] 투입한 금액을 바탕으로 로또를 발행하는 Chance Data Class
  - [x] 투입한 금액을 생성자로 하며, 1000으로 나눈 값(발행 가능한 로또의 수) 내부 필드에 저장
  - [x] 해당 값을 ResultView에서 출력하도록 함수를 구현
#### 2-2. 금액에 알맞는 수량만큼 로또를 발행하는 기능(Domain)
- [x] 구입한 로또의 개수만큼 1부터 45까지 겹치지 않는 6개의 숫자를 뽑아 그 결과를 저장하는 NumberPicker 클래스
  - [x] 반복문을 활용하여 구입한 개수만큼 랜덤한 6개의 정수로 이뤄진 리스트로 이뤄진 리스트를 제작
- [x] NumberPicker 객체를 토대로 발행된 로또들의 숫자를 오름차순으로 정렬하고 그 결과를 저장하는 Lotto 클래스 구현
  - [x] 하나의 로또에 6개의 서로 정수가 들어가 있는지 판별하여, 그렇지 않은 경우 IllegalArgumentException 표출 
#### 2-3. 발행할 수 있는 로또 수량만큼 로또 번호들을 출력하는 기능(Domain ➡️ Controller ➡️ View)
- [x] Controller 측에서 정렬된 상태의 로또 리스트를 ResultView에 전달하여 각 로또의 숫자를 리스트 형태로 출력


### 3. 당첨 번호
#### 3.1. 당첨 번호를 입력하는 기능(View ➡️ Controller)
- [x] View에서 사용자로부터 당첨번호를 입력받는다.
- [x] 사용자로부터 입력받은 금액의 유효성을 InputViewValidation에서 체크하고, 예외처리 한다. 유효하지 않은 값 입력 시 사용자가 다시 입력하도록 한다.
- [x] 입력한 당첨번호에 예외 사항이 없을 때 정수의 리스트 형태로 반환받는 함수를 구현한다.
#### 3.2. 보너스 번호를 입력하는 기능(View ➡️ Controller)
- [x] View에서 사용자로부터 보너스 번호를 입력받는다.
- [x] 보너스 번호는 당첨번호에 이미 존재하는 숫자로 설정할 수 없다.
- [x] 입력한 보너스 번호에 예외 사항이 없다면 정수 형태로 반환받는 함수를 구현한다.
#### 3.3. 당첨 번호와 보너스 번호를 Winning 도메인에 저장하는 기능(Controller ➡️ Domain)
- [x] Controller 측으로 넘어온 당첨번호 리스트와 보너스 번호를 Winning 도메인 클래스에 저장

### 4. 결과
#### 4.1. 결과 계산(Domain)
- [x] 등수 별 일치 당첨 숫자 개수, 보너스 번호 일치 여부, 표출할 메시지를 담은 enum class
- [x] 발행한 로또(정수의 리스트)들을 하나하나 순회
  - [x] 각 리스트 별로 당첨번호와 보너스 번호의 존재 여부를 판별하여 별도의 도메인(ResultData - Data Class)에 저장
- [x] 로또의 결과 데이터를 담은 FinalResult 데이터 클래스 내부에 결과를 얻어오는 함수를 구현
 - [x] 발행한 로또 중 맞은 숫자의 개수 별로 몇 개의 로또가 존재하는지 결과를 반환
 - [x] 총 수익률을 반환(소수점 첫째 자리까지 표현, 둘째 자리에서 반올림)
#### 4.2. 결과 표출(Domain ➡️ Controller ➡️ View)
- [x] ResultView에서 요구 사항에 맞게 당첨내역을 출력