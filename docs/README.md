### Index

1. [로또](#로또)
2. [기능 목록](#기능-목록)
3. [예외 사항](#예외-사항)
4. [역할 분배](#역할-분배)
4. [기능 요구 사항](#기능-요구-사항)
5. [프로그래밍 요구 사항](#프로그래밍-요구-사항)

---

# 로또

플레이어로부터 `로또 구입 금액`, `당첨 번호` 그리고 `보너스 번호`를 입력받아 랜덤으로 생성된 로또 번호와 비교하여 당첨 금액과 수익률을 계산하여 출력하는 프로그램

## 기능 목록

- [x] 6개의 랜덤 숫자를 구매한 금액의 수 만큼 생성한다.
- [x] 랜덤으로 생성된 숫자와 플레이어가 입력한 당첨 번호와 보너스 번호를 비교할 수 있다.
    - [x] 몇 개의 숫자가 같은지 알 수 있다.
        - 3개의 숫자가 일치하면 5,000원 당첨이다.
        - 4개의 숫자가 일치하면 50,000원 당첨이다.
        - 5개의 숫자가 일치하면 1,500,000원 당첨이다.
        - 5개의 숫자와 보너스 번호가 일치하면 30,000,000원 당첨이다.
        - 6개의 숫자가 일치하면 2,000,000,000원 당첨이다.
- [x] 당첨 금액을 토대로 수익률을 계산한다.

## 예외 사항

- [x] 공백을 입력한 경우 예외가 발생한다.
- [x] 1~45 이외의 숫자를 입력한 경우 예외가 발생한다.
- [x] 숫자가 아닌 문자를 입력한 경우 예외가 발생한다.
- [x] 중복된 숫자를 입력한 경우 예외가 발생한다.
    - [x] 보너스 번호와 당첨 번호가 중복되면 예외가 발생한다.
- [x] 처음과 마지막에 쉼표(,)를 입력한 경우 예외가 발생한다.
- [x] 쉼표(,) 사이에 공백이 있는 경우 예외가 발생한다.
- [x] 구입 금액이 1,000원 단위로 나누어 떨어지지 않는 경우 예외가 발생한다.

---

## 역할 분배

### Lotto

| method           | 역할                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------|
| matchNumbers()   | - 당첨 번호(luckyNumbers)를 파라미터로 받는다. <br/> - 당첨 번호와 랜덤으로 생성된 로또 번호를 비교하여 일치하는 개수를 반환한다.               |
| hasBonusNumber() | - 보너스 번호(bonusNumber)를 파라미터로 받는다. <br/> - 보너스 번호가 랜덤으로 생성된 로또 번호에 포함되어 있으면 true, 없으면 false 를 반환한다. |

### LottoWinResult

| method                          | 역할                                                                                               |
|---------------------------------|--------------------------------------------------------------------------------------------------|
| getRanks()                      | - 현재까지 당첨된 로또의 등수를 보여준다.                                                                          |
| getMoney()                      | - 현재까지 당첨된 금액의 합을 보여준다.                                                                          |
| calculateRank()                 | - 당첨 번호와 로또 번호가 일치하는 볼의 개수(ball)와 보너스 번호(bonus)를 파라미터로 받는다. <br/> - ball 의 개수를 토대로 등수를 판별한다.     |
| addPrizeMoney()                 | - 당첨 번호와 로또 번호가 일치하는 볼의 개수(ball)와 보너스 번호(bonus)를 파라미터로 받는다. <br/> - ball 의 개수를 토대로 당첨된 금액을 판별한다. |
| calculateRankOrMoneyWithBonus() | - 보너스 번호(bonus)를 파라미터로 받는다. <br/> - 보너스 번호를 가지고 있으면 true, 없으면 false 를 반환한다.                      |
| calculateRateOfProfit()         | - 로또 구입 금액(price)과 총 당첨 금액(prizeMoney)을 파라미터로 받는다. <br/> - 만약 당첨 금액이 없다면 0, 있다면 수익률을 계산하여 반환한다.  |

### NumberGenerator

| method                | 역할                                         |
|-----------------------|--------------------------------------------|
| createRandomNumbers() | - 1부터 45 사이의 값을 생성한 후 중복되지 않는 6개의 수를 반환한다. |

### LottoView

| mothod                     | 역할                                                                                                                                     |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | 
| askPurchaseTickets()       | - 구입 금액 입력 안내 문구를 출력한다.                                                                                                   |     |
| getTicketPrice()           | - 구입 금액 입력을 받은 후, 유효성 검사가 통과된 문자열을 반환한다.                                                                      |     |
| askLuckyNumbers()          | - 당첨 번호 입력 안내 문구를 출력한다.                                                                                                   |     |
| getLuckyNumbers()          | - 당첨 번호 입력을 받은 후, 유효성 검사가 통과된 문자열 목록을 반환한다.                                                                 |     |
| askBonusNumber()           | - 보너스 번호 입력 안내 문구를 출력한다.                                                                                                 |     |
| getBonusNumber()           | - 보너스 번호 입력을 받은 후, 유효성 검사가 통과된 문자열을 반환한다.                                                                    |     |
| calculateTicketCount()     | - 입력 받은 구입 금액 입력을 티켓 1개의 가격(1,000원)으로 나누어 로또 구입 개수를 계산한다.                                              |     |
| showPurchasedTicketCount() | - 로또 구입 개수(ticketCount)를 파라미터로 받은 후 출력한다.                                                                             |     |
| showPurchasedTicketCount() | - 당첨된 등수 목록(ranks)을 파라미터로 받는다. <br/> - 진행된 로또의 당첨 결과를 출력한다.                                               |     |
| showPurchasedTicketCount() | - 당첨 통계 안내 문구와 구분선을 출력한다.                                                                                               |     |
| showRateOfProfit()         | - 수익률(rateOfProfit)을 파라미터로 받아 출력한다.                                                                                       |     |
| closeConsole()             | - 사용한 Scanner 의 인스턴스를 null로 만들어 종료한다.                                                                                   |     |
| printWithNewLine()         | - 출력할 문자열(output)을 파라미터로 받는다. <br/> - 개행 1줄과 출력할 문자열를 출력한다.                                                |     |
| validTicketPrice()         | - 로또 구입 가격의 유효성을 검사한다.                                                                                                    |     |
| validLuckyNumbers()        | - 당첨 번호의 유효성을 검사한다.                                                                                                         |     |
| validBonusNumber()         | - 보너스 번호의 유효성을 검사한다.                                                                                                       |     |
| validBonusNumber()         | - 플레이어로부터 데이터를 입력받는다.                                                                                                    |     |
| commonRetryInput()         | - 입력 종류(type)을 파라미터로 받는다. <br/> - 플레이어로부터 입력받은 데이터의 유효성 검사를 통해 예외가 발생하지 않을 때까지 반복한다. |     |
| selectAskInputData()       | - 입력 종류(type)을 파라미터로 받는다. <br/> - 입력 종류에 따라 플레이어에게 입력 안내 문구를 출력하는 함수를 호출하여 입력을 받아 반환한다.                  |     |
|              selectValidInputData()              | - 플레이어의 입력(input)과 입력 종류(type) 을 파라미터로 받는다. <br/> - 입력 종류에 알맞는 유효성 검사 함수를 입력값(input)을 인자로하여 호출한다.                                                                                                                                          |     |
---

## 기능 요구 사항

```
- 로또 번호의 숫자 범위는 1~45까지이다.
- 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
- 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
- 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
    - 1등: 6개 번호 일치 / 2,000,000,000원
    - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
    - 3등: 5개 번호 일치 / 1,500,000원
    - 4등: 4개 번호 일치 / 50,000원
    - 5등: 3개 번호 일치 / 5,000원
```

- 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- 로또 1장의 가격은 1,000원이다.
- 당첨 번호와 보너스 번호를 입력받는다.
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.  
  `Exception`이 아닌 `IllegalArgumentException`, `IllegalStateException` 등과 같은 명확한 유형을 처리한다.

## 프로그래밍 요구 사항

- Kotlin 1.9.0에서 실행 가능해야 한다. **Kotlin 1.9.0에서 정상적으로 동작하지 않을 경우 0점 처리한다.**
- **Java 코드가 아닌 Kotlin 코드로만 구현해야 한다.**
- 프로그램 실행의 시작점은 `Application`의 `main()`이다.
- `build.gradle(.kts)`을 변경할 수 없고, 외부 라이브러리를 사용하지 않는다.
- Kotlin 코드 컨벤션 가이드를 준수하며 프로그래밍한다.
- 프로그램 종료 시 `System.exit()`를 호출하지 않는다.
- 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공해야 한다. **테스트가 실패할 경우 0점 처리한다.**
- 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않는다.
- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
    - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
    - 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메서드)를 분리하면 된다.
- 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

### 추가된 요구 사항

- 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
    - 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- else를 지양한다.
    - 힌트: if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
    - 때로는 if/else, when문을 사용하는 것이 더 깔끔해 보일 수 있다. 어느 경우에 쓰는 것이 적절할지 스스로 고민해 본다.
- Enum 클래스를 적용해 프로그래밍을 구현한다.
- 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
    - 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 분리해 구현한다.
    - 단위 테스트 작성이 익숙하지 않다면 test/kotlin/lotto/LottoTest를 참고하여 학습한 후 테스트를 구현한다.

### 라이브러리

- `camp.nextstep.edu.missionutils`에서 제공하는 `Randoms` 및 `Console` API를 사용하여 구현해야 한다.
- Random 값 추출은 `camp.nextstep.edu.missionutils.Randoms`의 `pickUniqueNumbersInRange()`를 활용한다.
- 사용자가 입력하는 값은 `camp.nextstep.edu.missionutils.Console`의 `readLine()`을 활용한다.

### Lotto 클래스

- 제공된 `Lotto` 클래스를 활용해 구현해야 한다.
- `numbers`의 접근 제어자인 private을 변경할 수 없다.
- `Lotto`에 필드를 추가할 수 없다.
- `Lotto`의 패키지 변경은 가능하다.